import { GoogleGenerativeAI } from "@google/generative-ai";

const apiKey = import.meta.env.VITE_GOOGLE_AI_API_KEY;
const genAI = new GoogleGenerativeAI(apiKey);

const model = genAI.getGenerativeModel({
  model: "gemini-1.5-flash",
});

const generationConfig = {
  temperature: 1,
  topP: 0.95,
  topK: 40,
  maxOutputTokens: 8192,
  responseMimeType: "application/json",
};

export const chatSession = model.startChat({
  generationConfig,
  history: [
    {
      role: "user",
      parts: [
        {
          text: "Generate Travel Plan for Location: Las Vegas, for 3 Days for Couple with a Cheap budget. Give me a Hotels options list with HotelName, Hotel address, Price, hotel image url, geo coordinates, rating, descriptions and suggest itinerary with placeName, Place Details, Place Image Url, Geo Coordinates, ticket Pricing, rating,  Time to travel each of the location for 3 days with each day plan with best time to visit in JSON format.\n",
        },
      ],
    },
    {
      role: "model",
      parts: [
        {
          text: 'I cannot access real-time information, including live hotel prices, availability, images, and geo-coordinates.  Also, providing URLs directly is beyond my capabilities.  However, I can give you a JSON template that you can populate using online travel agencies (like Expedia, Kayak, Booking.com, etc.) to find the specific data you need.\n\nRemember to check for deals and discounts when booking hotels and activities.  Consider off-season travel for cheaper rates.\n\n\n```json\n{\n  "tripName": "Las Vegas Budget Trip for Couples (3 Days)",\n  "budget": "Cheap",\n  "travelers": 2,\n  "duration": 3,\n  "hotels": [\n    {\n      "hotelName": "Hotel Name 1 (Example)",\n      "hotelAddress": "Address 1 (Example)",\n      "pricePerNight": null,  // You need to find this\n      "hotelImageUrl": null,   // You need to find this\n      "geoCoordinates": {\n        "latitude": null,      // You need to find this\n        "longitude": null      // You need to find this\n      },\n      "rating": null,         // You need to find this\n      "description": "Example hotel description.  Look for hotels outside the Strip for better prices."\n    },\n    {\n      "hotelName": "Hotel Name 2 (Example)",\n      "hotelAddress": "Address 2 (Example)",\n      "pricePerNight": null,\n      "hotelImageUrl": null,\n      "geoCoordinates": {\n        "latitude": null,\n        "longitude": null\n      },\n      "rating": null,\n      "description": "Example hotel description."\n    },\n    {\n      "hotelName": "Hotel Name 3 (Example)",\n      "hotelAddress": "Address 3 (Example)",\n      "pricePerNight": null,\n      "hotelImageUrl": null,\n      "geoCoordinates": {\n        "latitude": null,\n        "longitude": null\n      },\n      "rating": null,\n      "description": "Example hotel description."\n    }\n  ],\n  "itinerary": {\n    "day1": [\n      {\n        "placeName": "Fremont Street Experience",\n        "placeDetails": "Free walking area with light shows and street performers.",\n        "placeImageUrl": null,  // You need to find this\n        "geoCoordinates": {\n          "latitude": null,    // You need to find this\n          "longitude": null    // You need to find this\n        },\n        "ticketPricing": "Free",\n        "travelTime": "30 minutes (depending on your hotel location)"\n      },\n      {\n        "placeName": "Downtown Container Park",\n        "placeDetails": "Unique shopping and dining area made of shipping containers.",\n        "placeImageUrl": null,\n        "geoCoordinates": {\n          "latitude": null,\n          "longitude": null\n        },\n        "ticketPricing": "Free entry",\n        "travelTime": "15 minutes from Fremont Street"\n      }\n    ],\n    "day2": [\n      {\n        "placeName": "Seven Magic Mountains",\n        "placeDetails": "Colorful art installation south of Las Vegas (requires transportation).",\n        "placeImageUrl": null,\n        "geoCoordinates": {\n          "latitude": null,\n          "longitude": null\n        },\n        "ticketPricing": "Free",\n        "travelTime": "30-45 minutes by car"\n      },\n      {\n        "placeName": "Red Rock Canyon National Conservation Area",\n        "placeDetails": "Scenic drives and hiking trails (requires transportation).",\n        "placeImageUrl": null,\n        "geoCoordinates": {\n          "latitude": null,\n          "longitude": null\n        },\n        "ticketPricing": "Small entrance fee per vehicle",\n        "travelTime": "30-45 minutes by car"\n      }\n\n    ],\n    "day3": [\n      {\n        "placeName": "The Strip (Free Activities)",\n        "placeDetails": "Walk the Strip, enjoy the sights and sounds, free fountain shows at Bellagio.",\n        "placeImageUrl": null,\n        "geoCoordinates": {\n          "latitude": null,\n          "longitude": null\n        },\n        "ticketPricing": "Free (except for shows and attractions)",\n        "travelTime": "Variable, depending on how far you walk"\n      },\n      {\n        "placeName": "In-N-Out Burger",\n        "placeDetails": "Affordable and delicious West Coast burger chain.",\n        "placeImageUrl": null,\n        "geoCoordinates": {\n          "latitude": null,\n          "longitude": null\n        },\n        "ticketPricing": "Budget-friendly meal",\n        "travelTime": "Variable, depending on location"\n      }\n    ]\n  }\n}\n```\n\nTo use this:\n\n1. **Find Hotels:** Use hotel booking websites to fill in the `hotels` section with actual hotel details.\n2. **Find Images:** Search for images of the hotels and attractions online.  Remember to respect copyright.\n3. **Get Coordinates:** Use Google Maps or similar services to find the geographical coordinates.\n4. **Check Pricing:** Check the current prices for entrance fees and transportation.\n\n\nRemember that this is a *template*. You will need to research and fill in the missing information to create a functional travel plan.  Prioritize free or low-cost activities and look for deals to maximize your budget.  Consider public transportation or ride-sharing to save on transportation costs, especially to locations outside the Strip.\n',
        },
      ],
    },
    {
      role: "user",
      parts: [
        {
          text: "Generate Travel Plan for Location: Las Vegas, for 3 Days for Couple with a Cheap budget. Give me a Hotels options list with HotelName, Hotel address, Price, hotel image url, geo coordinates, rating, descriptions and suggest itinerary with placeName, Place Details, Place Image Url, Geo Coordinates, ticket Pricing, rating,  Time to travel each of the location for 3 days with each day plan with best time to visit in JSON format.",
        },
      ],
    },
    {
      role: "model",
      parts: [
        {
          text: 'I cannot provide real-time information such as hotel prices, availability, images, URLs, and exact geo-coordinates. This data changes constantly.  However, I can give you a more detailed JSON template that you can then populate using online travel agencies and map services. Remember that prices are estimates and can vary.\n\n```json\n{\n  "tripName": "Las Vegas Budget Trip for Couples (3 Days)",\n  "budget": "Cheap",\n  "travelers": 2,\n  "duration": 3,\n  "hotels": [\n    {\n      "hotelName": "Circus Circus Hotel & Casino",\n      "hotelAddress": "2880 Las Vegas Blvd S, Las Vegas, NV 89109",\n      "pricePerNight": { "estimate": 50, "currency": "USD", "notes": "Prices vary greatly depending on season and availability. Check booking sites." },\n      "hotelImageUrl": "https://example.com/circuscircus.jpg",  // Replace with actual image URL\n      "geoCoordinates": { "latitude": 36.1273, "longitude": -115.1706 },\n      "rating": 3.5,  // Replace with actual rating from a review site.\n      "description": "A budget-friendly option on the Strip, known for its circus acts and affordable rooms.  Expect a more lively, less luxurious experience."\n    },\n    {\n      "hotelName": "Excalibur Hotel & Casino",\n      "hotelAddress": "3850 Las Vegas Blvd S, Las Vegas, NV 89109",\n      "pricePerNight": { "estimate": 60, "currency": "USD", "notes": "Prices vary greatly depending on season and availability. Check booking sites." },\n      "hotelImageUrl": "https://example.com/excalibur.jpg", // Replace with actual image URL\n      "geoCoordinates": { "latitude": 36.1001, "longitude": -115.1727 },\n      "rating": 3.0, // Replace with actual rating from a review site.\n      "description": "Another budget-friendly option on the Strip, themed around medieval times. It offers more affordable rooms but may have older facilities."\n    },\n    {\n      "hotelName": "Luxor Hotel & Casino",\n      "hotelAddress": "3900 Las Vegas Blvd S, Las Vegas, NV 89119",\n      "pricePerNight": { "estimate": 70, "currency": "USD", "notes": "Prices vary greatly depending on season and availability. Check booking sites." },\n      "hotelImageUrl": "https://example.com/luxor.jpg", // Replace with actual image URL\n      "geoCoordinates": { "latitude": 36.0919, "longitude": -115.1722 },\n      "rating": 3.8,  // Replace with actual rating from a review site.\n      "description": "Pyramid-shaped hotel on the south Strip. Prices can fluctuate but sometimes offer deals. "\n    }\n  ],\n  "itinerary": {\n    "day1": [\n      {\n        "placeName": "Fremont Street Experience",\n        "placeDetails": "Free walking area with light shows and street performers. Viva Vision light show is a must-see.",\n        "placeImageUrl": "https://example.com/fremontstreet.jpg", // Replace with actual image URL\n        "geoCoordinates": { "latitude": 36.1699, "longitude": -115.1400 },\n        "ticketPricing": "Free (some shows may have separate fees)",\n        "rating": 4.0,\n        "travelTime": "30-45 minutes by taxi/rideshare from most hotels on the Strip."\n      },\n      {\n        "placeName": "Container Park",\n        "placeDetails": "Unique shopping and dining area made of shipping containers. Check for free events.",\n        "placeImageUrl": "https://example.com/containerpark.jpg", // Replace with actual image URL\n        "geoCoordinates": { "latitude": 36.1700, "longitude": -115.1330 },\n        "ticketPricing": "Free entry",\n        "rating": 4.2,\n        "travelTime": "15 minutes walk from Fremont Street Experience."\n      }\n    ],\n    "day2": [\n      {\n        "placeName": "Seven Magic Mountains",\n        "placeDetails": "Colorful art installation south of Las Vegas (requires transportation - rent a car or use rideshare).",\n        "placeImageUrl": "https://example.com/sevenmagicmountains.jpg", // Replace with actual image URL\n        "geoCoordinates": { "latitude": 35.9691, "longitude": -115.0242 },\n        "ticketPricing": "Free",\n        "rating": 4.5,\n        "travelTime": "30-45 minutes by car from the Strip; longer by rideshare."\n      },\n      {\n        "placeName": "Red Rock Canyon National Conservation Area (Scenic Drive)",\n        "placeDetails": "Scenic drives and hiking trails (requires transportation).  Drive the 13-mile scenic loop.",\n        "placeImageUrl": "https://example.com/redrockcanyon.jpg", // Replace with actual image URL\n        "geoCoordinates": { "latitude": 36.2015, "longitude": -115.8637 },\n        "ticketPricing": "Small entrance fee per vehicle",\n        "rating": 4.7,\n        "travelTime": "30-45 minutes by car from the Strip"\n      }\n    ],\n    "day3": [\n      {\n        "placeName": "The Strip (Free Activities)",\n        "placeDetails": "Walk the Strip, enjoy the sights and sounds, free fountain shows at Bellagio (check showtimes).",\n        "placeImageUrl": "https://example.com/lasvegasstrip.jpg", // Replace with actual image URL\n        "geoCoordinates": { "latitude": 36.1146, "longitude": -115.1729 },  // Approximate coordinates for the Strip.\n        "ticketPricing": "Free (except for shows and attractions)",\n        "rating": 4.0,\n        "travelTime": "Variable, depending on how far you walk"\n      },\n      {\n        "placeName": "In-N-Out Burger",\n        "placeDetails": "Affordable and delicious West Coast burger chain.  Multiple locations.",\n        "placeImageUrl": "https://example.com/innout.jpg", // Replace with actual image URL\n        "geoCoordinates": { "latitude": null, "longitude": null },  // Search for a nearby location using Google Maps.\n        "ticketPricing": "Budget-friendly meal (approx. $10-$15 per person)",\n        "rating": 4.4,\n        "travelTime": "Variable, depending on location"\n      }\n    ]\n  }\n}\n```\n\nRemember to replace the placeholder image URLs and fill in any missing details using online resources before your trip.  Always check for current pricing and availability.  This is a *suggested* itinerary; you can adjust it to fit your preferences and interests.  Prioritize free activities and look for deals to maximize your budget.\n',
        },
      ],
    },
  ],
});
